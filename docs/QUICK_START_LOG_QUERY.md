# ğŸ“‹ Admin æ—¥å¿—æŸ¥è¯¢ - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ è®¿é—®æ—¥å¿—æŸ¥è¯¢åŠŸèƒ½

### å‰ç½®æ¡ä»¶
- âœ… æ‹¥æœ‰**è¶…çº§ç®¡ç†å‘˜æƒé™**
- âœ… å·²ç™»å½•åå°ç®¡ç†ç³»ç»Ÿ

### è®¿é—®æ­¥éª¤
1. è¿›å…¥åå°ç®¡ç†ç³»ç»Ÿé¦–é¡µ
2. å·¦ä¾§èœå• â†’ **æ—¥å¿—æŸ¥è¯¢** (ğŸ“„ icon)
3. å¼€å§‹æŸ¥è¯¢æ—¥å¿—

---

## ğŸ“– åŸºç¡€ä½¿ç”¨

### æ­¥éª¤ 1: é€‰æ‹©æ—¥å¿—æ–‡ä»¶

```
â”Œâ”€ æ—¥å¿—æŸ¥è¯¢ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                     â”‚
â”‚  é€‰æ‹©æ—¥å¿—æ–‡ä»¶: [â–¼ 2025-12-23.log           ]      â”‚
â”‚               (è‡ªåŠ¨åˆ—å‡ºæœ€æ–°çš„æ—¥å¿—æ–‡ä»¶)             â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ­¥éª¤ 2: ç¼–å†™æˆ–é€‰æ‹©æŸ¥è¯¢

**æ–¹å¼ Aï¼šä½¿ç”¨é¢„è®¾ç¤ºä¾‹**
- ç‚¹å‡»ä¸‹é¢ 8 ä¸ªæŒ‰é’®ä¹‹ä¸€å¿«é€ŸåŠ è½½ç¤ºä¾‹æŸ¥è¯¢
- æ¯ä¸ªæŒ‰é’®å¯¹åº”å¸¸è§çš„æŸ¥è¯¢åœºæ™¯

**æ–¹å¼ Bï¼šæ‰‹åŠ¨ç¼–å†™ jq æŸ¥è¯¢**
```
jq è¿‡æ»¤å™¨: [æŸ¥è¯¢è¡¨è¾¾å¼æ–‡æœ¬æ¡†]
```

### æ­¥éª¤ 3: æ‰§è¡ŒæŸ¥è¯¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [æ‰§è¡ŒæŸ¥è¯¢]  [æ¸…ç©º]  [å¤åˆ¶ç»“æœ]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ­¥éª¤ 4: æŸ¥çœ‹ç»“æœ

- **ç½‘æ ¼å±•ç¤º**: æ¯æ¡æ—¥å¿—ä¸€è¡Œï¼Œå­—æ®µä½œä¸ºå•å…ƒæ ¼
  - ğŸŸ¢ ç»¿è‰² = å­—ç¬¦ä¸²
  - ğŸŸ¡ é»„è‰² = æ•°å­—
  - ğŸ”µ è“è‰² = å¸ƒå°”å€¼

- **æŸ¥çœ‹è¯¦æƒ…**: ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®å±•å¼€å®Œæ•´ JSON

---

## ğŸ” 8 ä¸ªé¢„è®¾æŸ¥è¯¢ç¤ºä¾‹

### 1ï¸âƒ£ æŸ¥çœ‹æ‰€æœ‰è®°å½•
```jq
.
```
**è¯´æ˜**: è¿”å›æ‰€æœ‰æ—¥å¿—è®°å½•ï¼Œé»˜è®¤æŸ¥è¯¢

---

### 2ï¸âƒ£ ä»Šå¤©çš„æ—¥å¿— (2025-12-23)
```jq
select(startswith("2025-12-23"))
```
**è¯´æ˜**: ç­›é€‰ç‰¹å®šæ—¥æœŸçš„æ—¥å¿—

---

### 3ï¸âƒ£ æ¨¡ç³ŠæŸ¥è¯¢ - æœç´¢"success"
```jq
select(.message | contains("success"))
```
**è¯´æ˜**: åœ¨æ¶ˆæ¯å­—æ®µä¸­æœç´¢åŒ…å«ç‰¹å®šæ–‡æœ¬çš„æ—¥å¿—

---

### 4ï¸âƒ£ ç‰¹å®šç”¨æˆ·æŸ¥è¯¢ (user_id=123)
```jq
select(.user_id == 123)
```
**è¯´æ˜**: ç­›é€‰ç‰¹å®šç”¨æˆ·çš„æ“ä½œæ—¥å¿—

---

### 5ï¸âƒ£ æŒ‰æ¶ˆæ¯åˆ†ç»„ç»Ÿè®¡
```jq
group_by(.message) | map({message: .[0].message, count: length})
```
**è¯´æ˜**: ç»Ÿè®¡æ¯ç§æ¶ˆæ¯ç±»å‹å‡ºç°çš„æ¬¡æ•°

---

### 6ï¸âƒ£ æ—¶é—´èŒƒå›´æŸ¥è¯¢ (10:00-11:00)
```jq
select(.created_at > "2025-12-23 10:00:00" and .created_at < "2025-12-23 11:00:00")
```
**è¯´æ˜**: æŸ¥è¯¢ç‰¹å®šæ—¶é—´èŒƒå›´å†…çš„æ—¥å¿—

---

### 7ï¸âƒ£ æ•°æ®åº“ INSERT æ“ä½œ
```jq
select(.message | contains("INSERT"))
```
**è¯´æ˜**: ç­›é€‰æ‰€æœ‰æ’å…¥æ“ä½œ

---

### 8ï¸âƒ£ è€—æ—¶æ“ä½œç»Ÿè®¡ (è¶…è¿‡ 100ms)
```jq
select(has("duration_ms") and .duration_ms > 100)
```
**è¯´æ˜**: æ‰¾å‡ºæ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„æ“ä½œ

---

## ğŸ“ å¸¸è§ jq æŸ¥è¯¢æ¨¡å¼

### åŸºç¡€æŸ¥è¯¢
```jq
.                          # æ‰€æœ‰å­—æ®µ
.message                   # ä»…æ˜¾ç¤ºæ¶ˆæ¯
length                     # è®°å½•æ•°é‡
```

### æ¡ä»¶è¿‡æ»¤
```jq
select(.field == "value")  # ç­‰äº
select(.field != "value")  # ä¸ç­‰äº
select(.field > 100)       # å¤§äº
select(.message | contains("text"))  # åŒ…å«
```

### æ•°æ®å˜æ¢
```jq
.message                   # æå–å­—æ®µ
keys                       # è·å–æ‰€æœ‰å­—æ®µå
values                     # è·å–æ‰€æœ‰å€¼
```

### èšåˆæ“ä½œ
```jq
group_by(.user_id)         # æŒ‰å­—æ®µåˆ†ç»„
sort_by(.created_at)       # æ’åº
unique_by(.message)        # å»é‡
map({field: .field})       # æ˜ å°„å­—æ®µ
```

### ç»„åˆæŸ¥è¯¢
```jq
select(...) | map(...) | sort_by(...)  # ç®¡é“ç»„åˆ
```

---

## ğŸ¨ ç»“æœæ˜¾ç¤ºè¯´æ˜

### å•å…ƒæ ¼ç€è‰²è§„åˆ™
- **ğŸŸ¢ ç»¿è‰²** `string`: æ–‡æœ¬ç±»å‹ï¼Œè¶…è¿‡ 100 å­—ç¬¦æ˜¾ç¤º"..."
- **ğŸŸ¡ é»„è‰²** `number`: æ•°å€¼ç±»å‹ï¼Œç²¾ç¡®æ˜¾ç¤º
- **ğŸ”µ è“è‰²** `boolean`: çœŸ/å‡å€¼
- **âš« ç°è‰²** `null/undefined`: ç©ºå€¼

### è¯¦æƒ…æŒ‰é’®
- ç‚¹å‡»å•è¡Œå³ä¾§çš„"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®
- åœ¨æ¨¡æ€æ¡†ä¸­æŸ¥çœ‹æ ¼å¼åŒ–çš„å®Œæ•´ JSON
- å¯å¤åˆ¶å®Œæ•´ JSON å†…å®¹

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæŸ¥è¯¢æ²¡æœ‰ç»“æœï¼Ÿ
**A**: 
- æ£€æŸ¥é€‰æ‹©çš„æ—¥å¿—æ–‡ä»¶æ—¥æœŸæ˜¯å¦æ­£ç¡®
- ç¡®è®¤ jq è¡¨è¾¾å¼è¯­æ³•æ— è¯¯
- å°è¯•ä½¿ç”¨ `.` æ˜¾ç¤ºæ‰€æœ‰è®°å½•

### Q: jq è¡¨è¾¾å¼é”™è¯¯æ€ä¹ˆåŠï¼Ÿ
**A**:
- æŸ¥çœ‹ API è¿”å›çš„é”™è¯¯ä¿¡æ¯
- ä½¿ç”¨é¢„è®¾ç¤ºä¾‹æ¥å­¦ä¹ æ­£ç¡®è¯­æ³•
- å‚è€ƒ [jq å®Œæ•´æ‰‹å†Œ](#jq-å®Œæ•´æ‰‹å†Œ)

### Q: å¦‚ä½•æ˜¾ç¤ºç‰¹å®šå­—æ®µï¼Ÿ
**A**: ä½¿ç”¨ç®¡é“æ“ä½œï¼š
```jq
. | {created_at, message, user_id}
```

### Q: èƒ½ä¿®æ”¹æ—¥å¿—ä¿ç•™æ—¶é—´å—ï¼Ÿ
**A**: æ˜¯çš„ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š
```python
# config/settings.py
LOG_RETENTION_DAYS = 7  # æ”¹ä¸ºéœ€è¦çš„å¤©æ•°
```

---

## ğŸ”’ æƒé™è¯´æ˜

- âœ… **è¶…çº§ç®¡ç†å‘˜**: å¯æŸ¥è¯¢æ‰€æœ‰æ—¥å¿—
- âŒ **æ™®é€šç”¨æˆ·**: æ— æ³•è®¿é—®æ—¥å¿—æŸ¥è¯¢åŠŸèƒ½
- ğŸ” **å®‰å…¨ç‰¹æ€§**:
  - é˜²æ­¢è·¯å¾„éå†æ”»å‡»
  - jq æŸ¥è¯¢ 10 ç§’è¶…æ—¶é™åˆ¶
  - æ‰€æœ‰æ“ä½œéƒ½è¢«è®°å½•

---

## ğŸ“ è·å–å¸®åŠ©

### æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£
- [å®Œæ•´ä½¿ç”¨æŒ‡å—](./docs/ADMIN_LOG_QUERY_GUIDE.md)
- [é›†æˆæ€»ç»“](./docs/LOG_QUERY_INTEGRATION_SUMMARY.md)
- [æ¼”ç¤ºåœºæ™¯](./docs/LOG_QUERY_DEMO.md)
- [å®Œæ•´æŠ¥å‘Š](./LOG_QUERY_COMPLETE.md)

### æµ‹è¯•æ—¥å¿—æŸ¥è¯¢
```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬
python test_log_queries.py
```

### è”ç³»æŠ€æœ¯å›¢é˜Ÿ
- ğŸ“§ Email: dev@example.com
- ğŸ’¬ Slack: #dev-support

---

## ğŸ“Š æ—¥å¿—æ ¼å¼ç¤ºä¾‹

```json
{
  "created_at": "2025-12-23 10:30:45.123",
  "message": "user login",
  "user_id": 123,
  "operation": "auth.login",
  "duration_ms": 45
}
```

### å­—æ®µè¯´æ˜
| å­—æ®µ | è¯´æ˜ | ç±»å‹ |
|------|------|------|
| `created_at` | æ—¥å¿—æ—¶é—´æˆ³ | string |
| `message` | æ—¥å¿—æ¶ˆæ¯ | string |
| `user_id` | ç”¨æˆ·ID | number |
| `operation` | æ“ä½œç±»å‹ | string |
| `duration_ms` | æ“ä½œè€—æ—¶ | number |

---

## ğŸ“ å­¦ä¹  jq

### å®˜æ–¹èµ„æº
- [jq å®˜æ–¹æ‰‹å†Œ](https://stedolan.github.io/jq/manual/)
- [jq åœ¨çº¿å°è¯•](https://jqplay.org/)

### å¸¸ç”¨èµ„æº
- [jq é€ŸæŸ¥è¡¨](https://github.com/stedolan/jq/wiki/Cookbook)
- [ç¤¾åŒºç¤ºä¾‹](https://stackoverflow.com/questions/tagged/jq)

---

**æœ€åæ›´æ–°**: 2025-12-23
**ç‰ˆæœ¬**: 1.0
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

